# Анализ данных для сервиса аренды самокатов GoFast
## Цели работы
Анализ данных и проверка гипотез, которые могут помочь бизнесу вырасти.
## Описание данных
Имеются три датафрейма: <br>
1. `users_go.csv` - информация о пользователях из нескольких городов;
2. `rides_go.csv` - информация о поездках;
3. `subscriptions_go.csv` - информация о подписках.

Столбы в таблице *users_go.csv*:
1. `user_id` - уникальный номер пользователя;
2. `name` - имя пользователя;
3. `age` - возраст;
4. `city` - город пользователя;
5. `subscription_type` - тип подписки.

Есть два значения в столце subscription_type:
1. `free` 
* *без подписки*
* абонентская плата отсутствует;
* стоимость одной минуты поездки — 8 рублей;
* стоимость старта (начала поездки) — 50 рублей;

2. `ultra`

* *с подпиской Ultra*
* абонентская плата — 199 рублей в месяц;
* стоимость одной минуты поездки — 6 рублей;
* стоимость старта — бесплатно.

Столбы в таблице *rides_go.csv*:
1. `user_id` - уникальный номер пользователя;
2. `distance` - дистанция данной поездки в метрах;
3. `duration` - длительность поездки в минутах;
4. `date` - дата поездки.

Столбы в таблице *subscriptions_go.csv*:
1. `subscription_type` - тип подписки;
2. `minute_price` - стоимость одной минуты поездки;
3. `start_ride_price` - стоимость старта (начала поездки);
4. `subscription_fee` -абонентская плата  в месяц.
## План работ
### Шаг 1. Знакомство с данными.
<b>1.1.</b> Считаем CSV-файлы с данными с помощью библиотеки Pandas и сохраним их в датафреймы. Пути к файлам: <br>
/datasets/users_go.csv<br>
/datasets/rides_go.csv<br>
/datasets/subscriptions_go.csv<br>
<b>1.2.</b> Выведем первые строки каждого набора данных. Изучим общую информацию о каждом датафрейме.
### Шаг 2. Предобработка данных
**2.1** Приведем столбец date к типу даты Pandas. <br>
**2.2** Создадим новый столбец с номером месяца на основе столбца date.<br>
**2.3** Проверим наличие пропущенных значений и дубликатов в датафреймах. Обработаем их, если такие значения присутствуют.
### Шаг 3. Исследовательский анализ данных
Опишем и визуализируем общую информацию о пользователях и поездках:<br>
**3.1** частота встречаемости городов <br>
**3.2** соотношение пользователей с подпиской и без подписки<br>
**3.3** возраст пользователей<br>
**3.4** расстояние, которое пользователь преодолел за одну поездку<br>
**3.5** продолжительность поездок.
### Шаг 4. Объединение данных
**4.1** Объединим данные о пользователях, поездках и подписках в один датафрейм. Для этого воспользуйтесь методом merge().<br>
**4.2** Создадим ещё два датафрейма из датафрейма, созданного на этапе 4.1:<br>
c данными о пользователях без подписки;<br>
с данными о пользователях с подпиской.<br>
**4.3** Визуализируем информацию о расстоянии и времени поездок для пользователей обеих категорий.<br>
### Шаг 5. Подсчёт выручки
**5.1** Создадим датафрейм с агрегированными данными о поездках на основе датафрейма с объединёнными данными из шага 4: найдем суммарное расстояние, количество поездок и суммарное время для каждого пользователя за каждый месяц. <br>
**5.2** В этот же датафрейм добавим столбец с помесячной выручкой, которую принёс каждый пользователь — обратимся к информации об условиях оплаты для подписчиков и и тех, у кого нет подписки. Минуты при подсчёте стоимости округлим до ближайшего целого числа. <br>
### Шаг 6. Проверка гипотез
Продакт-менеджеры сервиса хотят увеличить количество пользователей с подпиской. Для этого они будут проводить различные акции, но сначала нужно выяснить несколько важных моментов.<br>
**6.1**  Важно понять, тратят ли пользователи с подпиской больше времени на поездки?  Проверим гипотезу. Используем исходные данные о продолжительности каждой сессии — отдельно для подписчиков и тех, у кого нет подписки.<br>
**6.2** Расстояние одной поездки в 3130 метров — оптимальное с точки зрения износа самоката. Можно ли сказать, что расстояние, которое проезжают пользователи с подпиской за одну поездку, меньше 3130 метров? Проверим гипотезу и сделаем выводы.<br>
**6.3** Проверим гипотезу о том, будет ли выручка от пользователей с подпиской выше, чем выручка от пользователей без подписки.<br>
**6.4** Представим такую ситуацию: техническая команда сервиса обновила сервера, с которыми взаимодействует мобильное <br>приложение. Она надеется, что из-за этого количество обращений в техподдержку значимо снизилось. Некоторый файл содержит для каждого пользователя данные о количестве обращений до обновления и после него. Какой тест нам понадобился бы для проверки этой гипотезы?
### Шаг 7. Распределения
**7.1** Отделу маркетинга GoFast поставили задачу: нужно провести акцию с раздачей промокодов на один бесплатный месяц подписки, в рамках которой как минимум 100 существующих клиентов должны продлить эту подписку. То есть по завершении периода действия подписки пользователь может либо отказаться от неё, либо продлить, совершив соответствующий платёж. 
Эта акция уже проводилась ранее и по итогу выяснилось, что после бесплатного пробного периода подписку продлевают 10% пользователей. Выясним, какое минимальное количество промокодов нужно разослать, чтобы вероятность не выполнить план была примерно 5%. Подберем параметры распределения, описывающего эту ситуацию, построим график распределения и сформулируем ответ на вопрос о количестве промокодов. <br>
**7.2** Отдел маркетинга рассылает клиентам push-уведомления в мобильном приложении. Клиенты могут открыть его или не открывать. Известно, что уведомления открывают около 40% получивших клиентов. Отдел планирует разослать 1 млн уведомлений. С помощью аппроксимации построим примерный график распределения и оценим вероятность того, что уведомление откроют не более 399,5 тыс. пользователей.
## Вывод
1. Ознакомились с данными и избавились от дубликатов в таблице с пользователями.
2. Определили, что больше всего пользователей сервисом в Пятигорске, а меньше всего в Москве (219 и 168 соответственно). 
3. Средний возраст пользователей везде примерно равен 25 годам.
4. Подписчиков меньше, чем пользователей без подписки (699 и 835 соответственно).
5. Средняя дистанция одной поездки в районе 3000 м, а средняя продолжительность чуть больше 17 минут. Так же в началах графиков продолжительности поездок и дистанции увидели всплески, говорящие нам о том, что многие пользователи предпочитают еще и короткие поезди дистанцией до 1 км и продолжительностью до 1 минуты.
6. Проверили гипотезы и получили следующие итоги: 
* средняя продолжительность поездки подписчиков больше, чем среднее время поездки у пользователей без подписки
* высока вероятность того, что среднее расстояние, которое проезжают пользователи с подпиской за одну поездку равно 3130 метров
* средняя выручка, которую получают с пользователя с подпиской, больше средней выручки, которую получают c пользователя без подписки.
7. Дополнительно прописали алгоритм действий для проверки гипотезы о том, что количество обращений в тех поддержку снизится после обновления сервера.
8. Выяснили, что для получения 100 новых подписчиков во время проведения акции с вероятностью невыполнения плана 5%, зная вероятность продления пользователем подписки 10%, необходимо отправить промокод **1168** людям. 
9. Выяснили, что вероятность того, что при отправке 1 млн. уведомлений их откроют не более 399,5 тыс. пользователей равно 15 %.
